name: EC2 auto deploy

on:
  push:
    branches:
      - main

jobs:
  deploy:
    uses: ./.github/workflows/deploy.yml
    with:
      host: ${{ secrets.HOST_NAME }}
      username: ${{ secrets.USER_NAME }}
      port: ${{ secrets.SSH_PORT }}
      key: ${{ secrets.PRIVATE_KEY }}
      script: |
        cd ${{ secrets.DEPLOY_DIR }}
        git pull origin main
